
![[COMP3121_9101-8.2.pdf#page=1]]

Problem Overview:


- A set of unlimited frogs that want to go:
   left bank → (some sequence of $n$ lilypads) → right bank
- A set of $n$ lilypads, each at some position $x_i$
- Frogs can jump from one lilypad to another within $j$ cm
- Lilypad sinks after one use:
	- Each lilypad cannot be used more than once in a path  
	- Each lilypad cannot used by more than one frog
- There are $m$ distinct jumps that are possible, including those to/from either riverbank.
- How many frogs can cross from left to right, given these rules?

In other words:  

- How many **vertex-disjoint** (except at endpoints) paths exist from left to right, where each vertex (lilypad) can be used at most once?

To model this a flow network:
- Vertices:
	- Left bank = source vertex $s$ 
	- Lilypads = intermediate vertices $\ell_i$
	- Right bank = sink vertex $t$
- Edges:
	- $s \to \ell_{i}$ edges of capacity $1$ for lilypads reachable from the left bank
	- $\ell_{j} \to t$ edges of capacity $1$ for lilypads reachable from the right bank
	- $\ell_i \leftrightarrow \ell_{i+1}$ bidirectional edges of capacity $1$ between pairs of adjacent (within $j$ cm) lilypad vertices
		- Forward jump = directed edge from $\ell_i \to \ell_{i+1}$ with capacity $1$
		- Backward jump = directed edge from $\ell_{i+1}\to \ell_{i}$ with capacity $1$
- Each frog corresponds to an $s \to t$ path in $G$


Notes:
- The edge capacity of 1 only prevents a path from using the same edge more than once, but does not restrict the path from using the same vertex.

---

### Part A

![[river-crossing-residual-network.excalidraw.png]]

A flow f is a max flow iff no augmenting paths.
Suppose that there is an augmenting path with respect to f
Can improve flow f by sending flow along this path.
Thus, f is not a max flow

---

### Part B

> Recall that for a flow network to correctly model a problem, every valid flow should be a valid instance of the problem, and vice versa.
> 
> Therefore, it suffices to show that a **bijection** does not hold.

Formulation.
- Construct a source vertex $s$ denoting the left bank and a sink vertex $t$ denoting the right;
- for $i$th lilypad, construct a vertex $\ell_i$, and connect all pairs of lilypads within $j$ cm with a bidirectional edge of capacity 1;
- for each lilypad vertex $\ell_i$ within $j$ cm of the left bank of the river, construct an edge from $s$ to $\ell_j$ with capacity 1; and
- for each lilypad vertex $\ell_i$ within $j$ cm of the right bank of the river, construct an edge from $\ell_i$ to $t$ with capacity 1.
    

**Claim:** 1-1 correspondence between maximum flow and maximum number of frogs that can cross the river.



By the integrality theorem, there exists an integral flow $f$ of value $k$.

- Suppose that the maximum number of frogs that can cross the river is $k$. 
- Let $f$ be any integral flow in Fermin's network.
- Since each edge has capacity 1, every edge carries flow 0 or 1.
- Consider an edge from the source vertex to a lilypad $(s, \ell_i)$ with $f(s, \ell_i) = 1$.  
- By flow conservation, there exists an edge $(\ell_i, \ell_j)$ with $f(\ell_i, \ell_j) = 1$. 
- Because all pairs of lilypads reachable from each other are connected with two directed edges of capacity $1$, the flow network also contains an edge $(\ell_j, \ell_i)$.
- This forms a  collection of $s\leadsto t$ paths which may pass through the same lilypad vertex; if one path uses an edge $\ell_i \to \ell_j$, then another path may still use $\ell_j \to \ell_i$. 
- Hence, there exists a feasible flow in Fermin’s network that uses some lilypad more than once,  and therefore does not correspond to any valid way for frogs to cross the river.


---

### Part C

To ensure that no lilypad vertex is used twice, we impose a vertex capacity of 1 for each of them. 

For all vertices except $s$ and $t$,  split vertex $v$ into two vertices $v_{\text{in}}$ and $v_\text{out}$ connected by an edge $v_{\text{in}} \to v_{\text{out}}$ with capacity $c(v)$. 

Suppose that the original flow network $G$ contains the edge $(u, v)$. This gets converted to the bidirectional edge $(u_{\text{out}}, v_{\text{in}})$ with two directions $u_{\text{out}} \to v_{\text{in}}$  and $v_{\text{out}} \to u_{\text{in}}$ .

This construction ensures that any path "using" the vertex $v$ in the original graph must use the edge $v_{\text{in}} \to v_{\text{out}}$  in the new graph.

![[river-crossing-vertex-disjoint.excalidraw.png|400]]

---

Suppose that the original flow network $G$ contains edge $(u, v)$. We define a new flow network $G'$ by creating a vertex $x$ and replacing edge $(u, v)$ by new edges $(u, x)$ and $(x, v)$ with $c(u, x) = c(x, v) = c(u, v)$. 

The resulting network satisfies the property that if an edge belongs to  the network, the reverse edge does not.