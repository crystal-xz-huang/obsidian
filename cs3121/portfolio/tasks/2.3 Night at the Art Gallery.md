Related to: [[Cell Tower Placement]]

![[COMP3121_9101-2.3.pdf#height=800]]

## Problem

The art gallery provides Larry with a sorted array $P = [p_1, p_2, \ldots, p_n]$ of $n$ ==real numbers==, where $p_i$ is the position of the $i$th painting in the hallway. The art gallery has an unlimited supply of guards, and each guard can protect paintings within one unit of distance in either direction. That is, a guard positioned at $x$ can protect any paintings between $x - 1$ and $x + 1$ inclusive. 

- Real numbers = $\mathbb{R}$ = the field of all rational and irrational numbers 
    - includes whole, rational, and irrational numbers, and can be positive, negative, or zero.

## Part A

> [!example] 
> The art gallery also presents Larry with one potential strategy to protect the paintings:
> 
> > Place a guard one unit to the left of the leftmost unprotected painting, and repeat.
> 
> Provide a counterexample to show that the proposed strategy does not necessarily minimise the number of guards used     

As a counterexample, consider the same example given in the problem statement with $n=3$ and paintings positioned at positions $[1, 2.5, 3.5]$. 

Using the proposed strategy, the gallery would place three guards at positions $0$, $1.5$, and $2.5$ to protect the paintings at $1$, $2.5$, and $3.5$ respectively.

However, the paintings can be protected with only two guards: one at $0$ to protect the painting at $1$, and another at $2.7$ to protect both the paintings at $2.5$ and $3.5$. 

Therefore the proposed strategy does not always minimise the number of guards used.

## Part B

> [!example] 
> Help Larry modify the art gallery's algorithm to make it correctly minimise the number of guards used; then, analyse the time complexity and prove the correctness of your algorithm.
> 
> **Hint:** One method to prove correctness of greedy algorithms is [[Greedy Stays Ahead Here]]. Here, "ahead" can be determined by the number of paintings protected by the first $k$ guards.

<u>Input:</u> A sorted array $P = \left[p_1, p_2, \ldots, p_n \right]$ of painting positions. 
<u>Output:</u> A array $G = \left[p_1, p_2, \ldots, p_m \right]$ of guard positions. 

<u>Intuition:</u>
For each painting $i$, we can place a guard within the closed interval $\left[p_{i-1}, p_{i+1}\right]$.
Choose a position that protects as many other paintings as possible.
Placing the guard at the right endpoint lets us protect the painting at $p_i$ and also all paintings in the range $[p_i , \cdots, p_{i+2}]$
 
<u>Greedy Template:</u>
- Start from the leftmost unprotected painting $p_i$​.
- Place a guard at $p_i+1$ (the position furthest to the right that still protects $p_i$​).
- This guard covers all paintings up to $p_i+2$.
- Skip all covered paintings and repeat until all paintings are covered.

---

### Attempt 1

**Algorithm**

Let $I$ be a collection of $n$ intervals on the real line, where the $i$th interval represents the subset of positions that can protect the painting at position $p_i$. That is, $I_i = \left[p_{i-1}, p_{i+1}\right]$.
%% OR %%
At each step, consider the subset (closed interval) of positions $I_i = \left[p_{i-1}, p_{i+1}\right]$ that can protect the painting at $p_i$. 

Since $P$ is sorted, the first painting at $p_1$ is the leftmost one of all paintings. Therefore, we do not ever need to consider positions to the left of $p_1$, since all other paintings must start after $p_1$. This gives us the following algorithm.

> Place a guard one unit to the right of the leftmost unprotected painting, and repeat.

This algorithm runs in $O(n)$ time, since each painting is considered at most once.

Firstly, note that placing the guard at the right endpoint of $I_i$ is at least as good as placing it at any other position $x$ in the interval, since any painting protected at $x$ will also be protected at the right endpoint.

---

**Proof of Correctness**

<b>Step 1. Define the solutions</b>

Let $G = \{ g_1, g_2, \dots, g_m \}$ and $O = \{ o_1, o_2, \dots, o_{m'} \}$ denote the positions of guards chosen by the greedy and optimal solutions respectively. 
%% We say this because we are assuming that G and O are ordered %%
Without loss of generality, assume $g_1 \leq \dots \leq g_m$ and $o_1 \leq \dots \leq o_{m'}$.
%% The number of optimal solutions must be at least as good as our greedy solution. %%
Note that since $O$ is optimal, $m' \leq m$. 

By our orderings of $G$ and $O$, we have that 
$f(G) = f( g_1, g_2, \dots, g_m) = f(\{ g_m \})$ and $f(O) = f(\{ o_{m'} \})$.

<b>Step 2. Find a measure by which your greedy stays ahead.</b>
%% From the hint, the measure f(⋅) should let us determine the number of paintings protected by the guards in the greedy and optimal solutions.
i.e. $f(\{ o_1, o_2, \dots, o_{m'} \})$ = number of paintings protected by the first $k$ guards.  
Some options:
- The **position** of the rightmost protected painting
- The **total number** of paintings protected
- The **index** of the rightmost protected painting 
  (equivalent to the count but 0-based, since P, G and O are all sorted)
- The **set** of all painting protected 
Also, f(S) must be something that we use to prove that our greedy solution is ahead,
so $f(G_k) ≥ f(O_k)$ for all k = greedy has protected at least as many painting as any other solution. %%

Let $f(S)$ be the index of the rightmost painting protected by the guards in the set $S$.
By our orderings of $G$ and $O$, we have that $f(G) = f(\{ g_m \})$ and $f(O) = f(\{ o_{m'} \})$.
We look to show that for all $1 \leq k \leq m$, that $f(G_k) \geq f(O_k)$.

%% 
(1) We will compare $G$ and $O$ by their number of paintings protected by the first $k$ guards.
i.e. We will define the measures $g_k = f(g_k)$ and $o_k = f(o_k)$ for all $k \leq m$
(2) We will show that for all $k \leq m$, $g_k ≥ o_k$ (i.e. $f(g_k) ≥ f(o_k)$).
%%

**Prove greedy stays ahead (by induction).**
We proceed by mathematical induction.

**Base case.** 
At the first step, our greedy algorithm places the guard at $g_1 = p_1 + 1$, which protects all paintings whose 

At $k=1$, our greedy algorithm chooses the right endpoint in the subset of all valid placements 
Since our greedy algorithm chooses the farthest possible position, it certainly must be the case that $f(G_1) \geq f(O_1)$.

%% 
Inductive hypothesis
Assume for some $k-1$, 

$$f(G_{k-1}) ≥ f(O_{k-1})$$

That is, after $k-1$ guards, our greedy solution has protected at least as many paintings as the optimal solution
%%

**Inductive hypothesis.** 
Suppose now that the statement is true for all $1 ≤ i \leq k - 1$; that is, $f(G_{i}) \geq f(O_i)$ . 

**Inductive step.** 
%% We now prove that the inductive hypothesis implies the inductive step; that is,
assume that $f(G_{k-1}) \geq f(O_{k-1})$ is true, and prove that $f(G_{k+1}) \geq f(O_{k+1})$ is true. %%

Given that $f(G_{k-1}) \geq f(O_{k-1})$, we will now prove that $f(G_k) \geq f(O_k)$.

%% $f(G_k)$ = index of the last painting **protected** by the kth guard %%

Assume that for some $k-1 \ge 1$, we have $f(G_{k-1}) \ge f(O_{k-1})$.  
That is, after placing $(k-1)$ guards, the greedy algorithm has protected at least as many paintings as the optimal solution.  

Now, consider the $k$th guard.  
The greedy algorithm always places the next guard one unit to the right of the first unprotected painting following $f(G_{k-1})$.  
Thus, its new guard covers all paintings up to $p_j + 1$, where $p_j$ is that first unprotected painting.  
The optimal solution must also protect this same painting $p_j$, and its $k$th guard can cover at most as far as $p_j + 1$.  
Therefore, $f(G_k) \ge f(O_k)$, maintaining the invariant.

> [!NOTE]
> - Each guard position spans a total of 2 units
> - At k = 1 (first painting), we know that both solutions must be within 2 units (inclusive) of the first painting, and hence, **|gk - ok| ≤ 2** i.e. the first guards cannot be more than 2 units away
> - For our greedy solution, a guard is only placed if the kth painting is more than 1 unit (non-inclusive) away from the (k-1)th painting. 

---

### Attempt 2

#### Algorithm

Given a sorted array of painting positions $P = [p_1, p_2, \dots, p_n]$,  
start from the leftmost unprotected painting and place a guard one unit to the right of it.  
This guard protects all paintings within one unit in either direction, i.e. in the range $[p_i,\, p_i + 2]$. 
Repeat this process with the next unprotected painting until all paintings are protected.  

Since each painting is considered once, this algorithm runs in $O(n)$ time.

#### Proof of Correctness (GSA)

**Step 1: Label your algorithm's partial solutions, and a general solution.**

Let $G = \{g_1, g_2, \dots, g_m\}$ and $O = \{o_1, o_2, \dots, o_{m'}\}$ denote the guard positions chosen by the greedy and optimal solutions respectively. Without loss of generality, assume $g_1 \le \dots \le g_m$ and $o_1 \le \dots \le o_{m'}$. Since $O$ is optimal, $m' \le m$. We proceed to show that $m \leq m'$.

**Step 2: Define a measure by which greedy stays ahead of the other solution.**

Let $f(S)$ be the position of the rightmost painting protected by the guards in a set $S$.

This means that $f(G) = f(\{ g_m \})$ and $f(O) = f(\{ o_{m'} \})$. 

For the greedy stays ahead, define the partial solutions $G_k = \{g_1, \ldots, g_k\}$ and $O_k = \{o_1, \ldots, o_k \}$. 

%% In other words, $f(G_k)$ denotes the rightmost painting protected after $k$ guards in the greedy solution, and $f(O_k)$ for the optimal solution. %%

We look to show that for all $1 \leq k \leq m$, that $f(G_k) \geq f(O_k)$.

%% Goal: Show that for all $k$, the invariant $f(G_k) \ge f(O_k)$ holds, meaning that the greedy algorithm protects at least as many paintings as the optimal algorithm by the first guards. %%

**Step 3: Prove greedy stays ahead (by induction)**

This can be shown by induction.

- Base case ($k = 1$).

The greedy algorithm places its first guard at $g_1 = p_1 + 1$, the rightmost position that still covers $p_1$.  

Any valid solution must place its first guard within $[p_1 - 1,\, p_1 + 1]$ to cover the first painting, so $o_1 \le p_1 + 1 = g_1$.  

Hence $f(G_1) = g_1 + 1 \ge o_1 + 1 = f(O_1)$.


- Inductive hypothesis

Suppose now that the statement is true for all $1 ≤ i \leq k - 1$; that is, $f(G_{i}) \geq f(O_i)$ . 

- Inductive step

Suppose now that the statement is true for all $1 ≤ i \leq k - 1$; that is, $f(G_{i}) \geq f(O_i)$ . 
We will now prove that $f(G_k) \ge f(O_k)$.

Consider the first painting $p$ protected by the first $k$ guards in the greedy solution. This painting must be after the rightmost painting protected by the first $(k-1)$th guards, and so $f(G_{k-1}) < p$. 

By the inductive hypothesis, the first $(k-1)$ guards in the optimal solution cannot have protected any paintings further to the right than the first $(k-1)$ guards in the greedy solution, and so $f(O_{k-1}) \le f(G_{k-1})< p.$

To protect this painting, the greedy algorithm places its $k$th guard at $g_k = p + 1$.

The optimal solution must also place its $k$th guard so that it protects $p$; therefore,

$$o_k - 1 \le p \le o_k + 1.$$

Suppose, for contradiction, that $o_k > g_k$. Then $o_k - 1 > g_k - 1 = p$, meaning that there exists a painting $p$ that would not be protected by the $k$th guard in $O$. This contradicts the assumption that $O$ is a valid solution, and thus it must be the case that 

$$o_k \le g_k \implies o_k + 1 \leq g_k + 1.
$$

Since $f(O_{k-1}) \leq o_k + 1$ and $f(G_{k-1}) \leq g_k + 1$, it follows that $f(G_k) \ge f(O_k)$. 

**Step 3: Prove optimality**

- Show that once G terminates, O cannot contain strictly less number of elements, with a proof by contradiction. This proves that the greedy algorithm is optimal.

%% Let $G = \{g_1, g_2, \dots, g_m\}$ and $O = \{o_1, o_2, \dots, o_{m'}\}$ denote the guard positions chosen by the greedy and optimal solutions respectively. %%

If $G$ is not optimal, then it must be the case that $m > m'$. Then there exists a painting $p$ that is protected by the first $m'$ guards in $O$ but not by the first $m'$ guards in $G$. 

This painting must lie after the rightmost painting protected by the first $m'$ guards in $G$; that is, $f(G_{m'}) < p$.

But by our previous result, we have that $$f(O) = f(O_{m'}) \leq f(G_{m'})  < p.$$

This is a contradiction, since painting $p$ also lies beyond the range protected by the guards in the optimal solution, so $O$ could not have been a feasible solution. Therefore, $m \leq m'$.

This proves that $m = m'$ and the greedy solution uses the same number of guards as any optimal solution, which proves optimality.

---