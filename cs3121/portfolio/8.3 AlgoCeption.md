
![[COMP3121_9101-8.3.pdf#page=1]]

---

COMP3121/9101 has $m$ sessions to teach $n$ students. Due to high demand, each student can only be seen **once** per session they are available for. Students also do not want to have their lives revolving around COMP3121/9101, so they have a limit on the number of sessions they would attend. A **demonstration** occurs when a student is allocated a staff member during a particular session. Students need to demo their tasks with staff at these sessions; otherwise, they become sad because their demo tasks aren't marked. The course staff hate seeing students sad, so they want to know (in theory), the maximum number of demonstrations each week. 

More formally, COMP3121/9101 has $m$ sessions where the staff of the $i$th session can be allocated at most $q_i$ students. There are also $n$ students, where student $j$ has both a list $A_j[1..m]$ of binary values where $A_j[i]$ is 1 if they are available for session $i$, and 0 otherwise, and a value $\ell_j$ denoting the maximum number of sessions they would attend.

Design an efficient algorithm that finds the maximum number of demonstrations, using techniques from flow networks. You must justify the correctness of your algorithm, and that your algorithm runs in the time complexity that you claim.

---

**Formulation.**
Construct a flow network with:

Vertices:
- source $s$ and sink $t$,
- a vertex $u_i$ for each student $i$.
- a vertex $v_j$ for each session $j$,

Edges:
- for each student $i$, an edge from $s$ to $u_i$ with capacity $\ell_i$ (max number of sessions student $i$ is willing to attend,
- for each student $i$, and for each session $j$ that they are willing to attend, an edge from $u_i$ to $v_j$ with capacity 1.
- for each session $j$, an edge from $v_j$ to $t$ with capacity $q_j$ (max number of students in the $j$th session).

**Question.** What does a flow in this network represent?
- Each student-session edge has capacity 1, so we will interpret a flow of 1 from $u_i$ to $v_j$ as assigning session j to student i.
- Each student only receives sessions they are available to attend.
- By flow conservation, the amount of flow sent along the edge from $s$ to student $u_i$ is equal to the total flow sent from student $u_i$ to all session vertices $v_j$ , so it represents the number of sessions received by student $i$. Again, the capacity constraint ensures that this does not exceed $\ell_i$ (max number of sessions) as required.
- Similarly, the session capacities $q_j$ are also respected. 
- Therefore, any flow in this graph corresponds to a valid allocation of sessions to students. 
- The converse is also true; any valid allocation of students to sessions is naturally represented by a flow.

**Question.** What is the running time to find the maximum flow?

- There are $m$ sessions and $n$ students.
- There are $n+m+2$ vertices and up to $nm + n + m$ edges so the time complexity is 

$$O (|V|·|E|^2 ) = O((n + m + 2)(nm + n + m)^2).$$

- Since the value of any flow is constrained by the total capacity from $s$ (i.e., the number of students), which in this case is $n$, we can achieve a tighter bound of

$$O(|E|·|f|) = O((nm + n + m)n) = O(n^2k).$$


**Proof.** What is the running time to find the maximum flow?